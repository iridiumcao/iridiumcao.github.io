# Reading Through the Bitcoin White Paper, é€šè¯»æ¯”ç‰¹å¸ç™½çš®ä¹¦

[â‡¦ä¸Šä¸€ç« ](wp06.md) - [è¿”å›ç›®å½•ğŸ“–](whitepaper.md) - [ä¸‹ä¸€ç« â‡¨](wp08.md)

---

æŒ‰ï¼šæœ¬ç« çš„å…³é”®æ˜¯Merkleæ ‘ã€‚

## 7. Reclaiming Disk Space å›æ”¶ç£ç›˜ç©ºé—´

> Once the latest transaction in a coin is buried under enough blocks, the spent transactions before it can be discarded to save disk space. To facilitate this without breaking the block's hash, transactions are hashed in a Merkle Tree [^7][^2][^5], with only the root included in the block's hash. Old blocks can then be compacted by stubbing off branches of the tree. The interior hashes do not need to be stored.
> 
> <img loading="lazy" alt="" src="../images/bitcoin-paper-p4-img1-900.png" class="aligncenter size-full" width="900" height="494">
>
> A block header with no transactions would be about 80 bytes. If we suppose blocks are generated every 10 minutes, 80 bytes * 6 * 24 * 365 = 4.2MB per year. With computer systems typically selling with 2GB of RAM as of 2008, and Moore's Law predicting current growth of 1.2GB per year, storage should not be a problem even if the block headers must be kept in memory.

è§£è¯»å¦‚ä¸‹ï¼š

> Once the latest transaction in a coin is buried under enough blocks, the spent transactions before it can be discarded to save disk space. 

ä¸€æ—¦ä¸€ä¸ªç¡¬å¸æœ€è¿‘çš„äº¤æ˜“è¢«è¶³å¤Ÿå¤šçš„èŠ‚ç‚¹è¦†ç›–ï¼Œè¿™ä¸ªäº¤æ˜“ä¹‹å‰çš„äº¤æ˜“å°±å¯ä»¥ä¸¢å¼ƒä»¥èŠ‚çœç£ç›˜ç©ºé—´ã€‚

* buryï¼ŒåŸ‹ï¼Œç»è¿‡ä¹å¹´ä¹‰åŠ¡æ•™è‚²çš„å­¦ä¹ ï¼Œä¸€èˆ¬åªæ™“å¾—å®ƒçš„æ„æ€æ˜¯â€œåŸ‹è‘¬â€ï¼Œä½†å…¶å®å®ƒçš„æœ¬æ„æ˜¯â€œåŸ‹â€ï¼Œä¸åªæ˜¯åŸ‹æ­»äººã€‚è¿™é‡Œçš„ç”¨æ³•å¾ˆå½¢è±¡ï¼ŒæŠŠä¸€ä¸ªäº¤æ˜“åŸ‹åœ¨åŒºå—é‡Œã€‚å¯ä»¥è¿™ä¹ˆæƒ³è±¡ï¼Œè¿™æ¡äº¤æ˜“è¢«æŸä¸ªåŒºå—åŒ…å«åï¼Œå°±åŸ‹è¿›å»äº†ï¼Œæ–°çš„åŒºå—å¢åŠ äº†ï¼ŒåŸ‹å®ƒçš„â€œåœŸâ€ä¹Ÿå¢åšäº†ã€‚ç¿»è¯‘çš„è¯ï¼Œå°±è¯‘æˆâ€œè¦†ç›–â€ä¹Ÿè¿˜è¡Œã€‚

> To facilitate this without breaking the block's hash, transactions are hashed in a Merkle Tree [^7][^2][^5], with only the root included in the block's hash. 

ä¸ºäº†è®©è¿™ï¼ˆèŠ‚çœç£ç›˜ç©ºé—´ï¼‰å®¹æ˜“ä¸€äº›ï¼Œå¹¶ä¸”ä¸ç ´ååŒºå—çš„å“ˆå¸Œï¼ŒåŒºå—ä¸­çš„å“ˆå¸Œä½¿ç”¨é»˜å…‹å°”ï¼ˆMerkleï¼‰æ ‘ï¼Œåªæœ‰æ ¹å“ˆå¸ŒåŒ…å«åœ¨åŒºå—å“ˆå¸Œä¸­ã€‚

> Old blocks can then be compacted by stubbing off branches of the tree. 

æ—§çš„åŒºå—å¯ä»¥é€šè¿‡å‰ªæ‰é»˜å…‹å°”æ ‘çš„æå¹²è¿›è¡Œå‹ç¼©ã€‚

> The interior hashes do not need to be stored.

å†…éƒ¨çš„å“ˆå¸Œæ— éœ€ä¿å­˜ã€‚

å…¶å®å°±æ˜¯é™¤äº†æ ¹å“ˆå¸Œï¼Œå…¶ä½™çš„å“ˆå¸Œéƒ½ä¸å¿…ä¿å­˜ã€‚

> 
> <img loading="lazy" alt="" src="../images/bitcoin-paper-p4-img1-900.png" class="aligncenter size-full" width="900" height="494">
>
> A block header with no transactions would be about 80 bytes. 

ä¸€ä¸ªä¸å¸¦äº¤æ˜“ä¿¡æ¯çš„åŒºå—å¤´å¤§çº¦å 80å­—èŠ‚ã€‚

> If we suppose blocks are generated every 10 minutes, 80 bytes * 6 * 24 * 365 = 4.2MB per year. 

å¦‚æœæˆ‘ä»¬å‡å®šæ¯10åˆ†é’Ÿç”Ÿæˆä¸€ä¸ªåŒºå—ï¼Œä¸€å¹´ç”Ÿæˆçš„æ•°æ®æ˜¯ 80 bytes * 6 * 24 * 365 = 4.2MB

> With computer systems typically selling with 2GB of RAM as of 2008, and Moore's Law predicting current growth of 1.2GB per year, storage should not be a problem even if the block headers must be kept in memory.

2008å¹´åœ¨å”®çš„ç”µè„‘åŸºæœ¬ä¸Šéƒ½æœ‰2GBçš„å†…å­˜ï¼ŒæŒ‰ç…§æ‘©å°”å®šå¾‹é¢„æµ‹æ¯å¹´å¢é•¿1.2GBï¼Œå³ä½¿åŒºå—å¤´éœ€è¦å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå­˜å‚¨ä¹Ÿä¸æ˜¯é—®é¢˜ã€‚

---

å‚è€ƒèµ„æ–™ï¼š

* [^2] H. Massias, X.S. Avila, and J.-J. Quisquater, "Design of a secure timestamping service with minimal trust requirements," In 20th Symposium on Information Theory in the Benelux, May 1999.
* [^5] S. Haber, W.S. Stornetta, "Secure names for bit-strings," In Proceedings of the 4th ACM Conference on Computer and Communications Security, pages 28-35, April 1997.
* [^7] R.C. Merkle, "Protocols for public key cryptosystems," In Proc. 1980 Symposium on Security and Privacy, IEEE Computer Society, pages 122-133, April 1980.

---

[â‡¦ä¸Šä¸€ç« ](wp06.md) - [è¿”å›ç›®å½•ğŸ“–](whitepaper.md) - [ä¸‹ä¸€ç« â‡¨](wp08.md)
