# ç¬¬å…­ç«  æ–‡æ¡£çš„ç‰ˆæœ¬æ“ä½œ

[â‡¦ä¸Šä¸€ç« ](05.md) - [é¦–é¡µğŸ ](index.md) - [ä¸‹ä¸€ç« â‡¨](07.md)

---

- [ç¬¬å…­ç«  æ–‡æ¡£çš„ç‰ˆæœ¬æ“ä½œ](#ç¬¬å…­ç« -æ–‡æ¡£çš„ç‰ˆæœ¬æ“ä½œ)
  - [1. å‡†å¤‡å®éªŒ](#1-å‡†å¤‡å®éªŒ)
  - [2. åˆ›å»ºæ–‡æ¡£](#2-åˆ›å»ºæ–‡æ¡£)
    - [2.1 åˆ›å»ºæ–‡æ¡£](#21-åˆ›å»ºæ–‡æ¡£)
    - [2.2 æ·»åŠ æ–‡æ¡£åˆ° Staging Area](#22-æ·»åŠ æ–‡æ¡£åˆ°-staging-area)
    - [2.3 æäº¤æ–‡æ¡£åˆ° Repository](#23-æäº¤æ–‡æ¡£åˆ°-repository)
  - [3. ä¿®æ”¹æ–‡æ¡£](#3-ä¿®æ”¹æ–‡æ¡£)
  - [4. åˆ é™¤æ–‡æ¡£](#4-åˆ é™¤æ–‡æ¡£)
  - [5. æŸ¥çœ‹æŒ‡ä»¤å¸®åŠ©](#5-æŸ¥çœ‹æŒ‡ä»¤å¸®åŠ©)
  - [6. è¿›é˜¶ç¯‡](#6-è¿›é˜¶ç¯‡)
    - [6.1 `git rm`](#61-git-rm)
    - [6.2 `git log --pretty=oneline`](#62-git-log---prettyoneline)
    - [6.3 ç»¼åˆæœ‰æ·»åŠ åˆ é™¤ä¿®æ”¹çš„ä¾‹å­](#63-ç»¼åˆæœ‰æ·»åŠ åˆ é™¤ä¿®æ”¹çš„ä¾‹å­)
    - [6.4 åˆ†æ”¯è¯´æ˜](#64-åˆ†æ”¯è¯´æ˜)

---

CRUD å¯ä»¥æ¦‚æ‹¬ä¸€åˆ‡å¯¹æ–‡æ¡£çš„æ“ä½œï¼Œè€Œ git ä¼šè®°å½•ä¸€åˆ‡ CUD çš„ç—•è¿¹ï¼Œè¿™ä¹Ÿæ˜¯ git çš„èŒè´£æ‰€åœ¨ã€‚

* **C**reate åˆ›å»º
* Read è¯»å–, æŸ¥è¯¢
* **U**pdate æ›´æ–°
* **D**elete åˆ é™¤

æœ¬æ–‡å°†æ–°å»ºä¸€ä¸ª repoï¼Œå¹¶æ¼”ç¤ºæ–‡æ¡£çš„ã€Œå¢åˆ æ”¹ã€æ“ä½œåœ¨ git ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿä¸­çš„ç—•è¿¹ã€‚

## 1. å‡†å¤‡å®éªŒ

åˆ›å»ºæ–°åº“å¹¶è¿›å…¥å·¥ä½œåŒº

```plaintext
git init test_repo && cd test_repo
```

(åˆ›å»ºæ–°åº“å¯å‚è€ƒ[ç¬¬å››ç« ](04.md)ï¼Œgit repo çš„ç›®å½•ç»“æ„å¯å‚è€ƒ[ç¬¬äº”ç« ](05.md))

é€šè¿‡ `git status` æŸ¥çœ‹ï¼Œè¿™ä¸ªæ–°çš„ repo ç©ºç©ºå¦‚ä¹Ÿâ€”â€”è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚

```plaintext
$ git status
On branch master

No commits yet

nothing to commit (create/copy files and use "git add" to track)
```

æ­¤æ—¶æ‰§è¡Œ `git log` ä¼šæŠ¥é”™ï¼š

```plaintext
$ git log
fatal: your current branch 'master' does not have any commits yet
```

## 2. åˆ›å»ºæ–‡æ¡£

æœ¬èŠ‚æ¼”ç¤ºåˆ›å»ºä¸€ä¸ªæ–‡æ¡£ hello.txt å¹¶å…¥åº“ã€‚

### 2.1 åˆ›å»ºæ–‡æ¡£

æ–°å»ºä¸€ä¸ªçº¯æ–‡æœ¬æ–‡æ¡£ï¼Œå¹¶å†™å…¥ä¸€è¡Œå­—ï¼š

```plaintext
$ echo "Hello, world!" >> hello.txt
```

ç”¨ `git status` æŸ¥çœ‹

```plaintext
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        hello.txt

nothing added to commit but untracked files present (use "git add" to track)
```

Git Bash çš„æç¤ºè¯­ä¿¡æ¯ç®€æ˜æ‰¼è¦ï¼Œå€¼å¾—è®¤çœŸçœ‹å®Œï¼Œå®ƒå‘Šè¯‰ç”¨æˆ·ï¼š

* å½“å‰æ‰€åœ¨çš„åˆ†æ”¯: master (æœ‰å…³åˆ†æ”¯æˆ‘ä»¬åç»­ä¼šè®²åˆ°ï¼Œè¿™é‡Œå…ˆä¸ç”¨è€ƒè™‘)
* å½“å‰æ²¡æœ‰ commit
* æœ‰ä¸€ä¸ªæ²¡æœ‰è·Ÿè¸ªçš„æ–‡æ¡£ hello.txt (æ‰€è°“ã€Œè·Ÿè¸ªã€å°±æ˜¯æœ‰æ²¡æœ‰è¢«ä»“åº“è®°å½•è¿‡)
* æç¤ºå¦‚ä½•è·Ÿè¸ªæ–‡æ¡£ï¼š`git add`

æ–‡å­—ä¸èƒ½ç€è‰²ï¼Œæˆªå›¾å¦‚ä¸‹ï¼š

![](images/ch06_01_create_new_file.png)

çº¢è‰²è¡¨ç¤ºè¿˜åœ¨å·¥ä½œåŒºï¼Œæ²¡æœ‰è¿›å…¥ç¼“å­˜åŒºï¼Œä¹Ÿæ²¡æœ‰å…¥åº“ã€‚

### 2.2 æ·»åŠ æ–‡æ¡£åˆ° Staging Area

é€šè¿‡ `git add` å¯ä»¥å°†æ–‡ä»¶å˜åŒ–ä»å·¥ä½œåŒºæ·»åŠ åˆ° Staging Area.

```plaintext
$ git add hello.txt
```

åœ¨ Windows ä¸Šæ‰§è¡Œä¸Šé¢çš„è¯­å¥å¯èƒ½ä¼šå¾—åˆ°è­¦å‘Šä¿¡æ¯ï¼š

```plaintext
$ git add hello.txt
warning: in the working copy of 'hello.txt', LF will be replaced by CRLF the next time Git touches it
```

è¿™ä¸ªé—®é¢˜ç°åœ¨å¯ä»¥å¿½ç•¥ï¼Œåœ¨[ç¬¬åäº”ç« ](15.md)ä¼šè®²æ€ä¹ˆå¤„ç†ã€‚

æ­¤æ—¶ç”¨ `git status` æ£€æŸ¥ï¼š

![](images/ch06_02_add_file_to_stage.png)

ç»¿è‰²è¡¨ç¤ºæ–‡ä»¶çš„æ”¹åŠ¨å·²ç»æ”¾åˆ° Staging Area äº†ã€‚

### 2.3 æäº¤æ–‡æ¡£åˆ° Repository

é€šè¿‡ `git commit` å¯ä»¥å°†æ–‡ä»¶å˜åŒ–ä» Staging Area æ·»åŠ åˆ° Repositoryï¼Œç®€ç§°å…¥åº“ã€‚

```plaintext
$ git commit --message="This is the first commit."
[master (root-commit) 3a7c633] This is the first commit.
 1 file changed, 1 insertion(+)
 create mode 100644 hello.txt
```

ä¸Šé¢è¿™æ¡æŒ‡ä»¤æ‰§è¡Œåï¼ŒStaging Area çš„æ‰€æœ‰çš„å˜åŒ–å°±å·²ç»å…¥åº“äº†ï¼Œå…¥åº“çš„æ“ä½œç§°ä¸º commit (æäº¤)ã€‚æ–‡ä»¶ä¸€æ—¦å…¥åº“ï¼Œå°±è¡¨æ˜è¿™ä¸ªæ–‡ä»¶è¢«ä»“åº“ã€Œè·Ÿè¸ª(track)ã€äº†ã€‚å…¥åº“æ—¶ç”Ÿæˆäº†ä¸€ä¸ª hash å­—ä¸² `3a7c633`, å®ƒå°±æ˜¯ commit hash. `--message` è¡¨ç¤ºæœ¬æ¬¡å…¥åº“éœ€è¦æ³¨æ˜çš„æ¶ˆæ¯ï¼Œç”±ç”¨æˆ·å®šä¹‰ï¼Œå¿…é¡»å†™ä¸Šï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸º `-m`.

ç°åœ¨æˆ‘ä»¬å†ç”¨ `git status` æŸ¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼š

```plaintext
$ git status
On branch master
nothing to commit, working tree clean
```

å®ƒæç¤ºå½“å‰æ²¡æœ‰ä¸œè¥¿éœ€è¦æäº¤ï¼Œå·¥ä½œåŒºå’Œç¼“å­˜åŒºéƒ½æ˜¯ç©ºçš„ã€‚

ç°åœ¨æˆ‘ä»¬ç”¨ `git log` å›å¤´æŸ¥çœ‹ç‰ˆæœ¬è®°å½•ï¼š

```plaintext
$ git log
commit 3a7c633683b18afe53ef089f9e86fda31c66a881 (HEAD -> master)
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:40:14 2023 +0800

    This is the first commit.
```

å¯ä»¥çœ‹åˆ° commit hashï¼š`3a7c633683b18afe53ef089f9e86fda31c66a881`ï¼Œè¿™æ˜¯å®Œæ•´çš„ hash valueï¼Œä¸€èˆ¬æˆ‘ä»¬ç”¨å®ƒçš„å‰é¢å‡ ä½å°±å¤Ÿäº†ï¼Œæ¯”å¦‚å‰é¢æ‰§è¡Œ `git commit` åçš„æç¤ºè¯­é‡Œçš„ `3a7c633` å°±åªç”¨äº†å‰é¢ä¸ƒä½ã€‚åªè¦å–çš„é‚£å‡ ä½æ•°å­—èƒ½å’Œå…¶ä»– commit åŒºåˆ†å¼€å°±è¡Œäº†ã€‚

![](images/ch06_07_commit_line1.png)

## 3. ä¿®æ”¹æ–‡æ¡£

ç»™ hello.txt å¢åŠ ä¸€è¡Œï¼š

```plaintext
$ echo "Morning!" >> hello.txt
```

ç°åœ¨æŸ¥çœ‹ repo çš„çŠ¶æ€ï¼š

```plaintext
$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   hello.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

æ–‡å­—ç‰ˆæ²¡æœ‰ç€è‰²ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼š

![](images/ch06_03_git_status_edit.png)

ä¸Šå›¾çº¢è‰²æ–‡å­—æ˜¾ç¤ºå·²ç»ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ã€‚å¯ä»¥é€šè¿‡ `git diff` æŒ‡ä»¤æŸ¥çœ‹ä¿®æ”¹çš„å…·ä½“å†…å®¹ã€‚

```plaintext
$ git diff
diff --git a/hello.txt b/hello.txt
index af5626b..476a580 100644
--- a/hello.txt
+++ b/hello.txt
@@ -1 +1,2 @@
 Hello, world!
+Morning!
```

æ–‡å­—ç‰ˆæ²¡æœ‰ç€è‰²ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼š

![](images/ch06_12_git_diff.png)

æ¥ä¸‹æ¥ä½¿ç”¨ `git add` æ·»åŠ åˆ°ç¼“å­˜åŒº(Staging Area):

```plaintext
$ git add hello.txt
warning: in the working copy of 'hello.txt', LF will be replaced by CRLF the next time Git touches it
```

å†ä½¿ç”¨ `git commit` å…¥åº“ï¼š

```plaintext
$ git commit -m "demo, edit hello.txt"
[master ecdb9ff] demo, edit hello.txt
 1 file changed, 1 insertion(+)
```

å¯ä»¥é€šè¿‡ `git show` æŸ¥çœ‹æœ€è¿‘ç‰ˆæœ¬çš„ä¿®æ”¹ï¼š

```plaintext
$ git show
commit ecdb9ff1ac54adc22ad73d66bbe9ef943ee3d553 (HEAD -> master)
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:56:50 2023 +0800

    demo, edit hello.txt

diff --git a/hello.txt b/hello.txt
index af5626b..476a580 100644
--- a/hello.txt
+++ b/hello.txt
@@ -1 +1,2 @@
 Hello, world!
+Morning!
```

æ–‡å­—ç‰ˆæ²¡æœ‰ç€è‰²ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼š

![](images/ch06_11_git_show.png)

ç”¨ `git log` æŸ¥çœ‹å†å²è®°å½•ï¼Œèƒ½å‘ç°å·²ç»æœ‰ä¸¤ä¸ªç‰ˆæœ¬äº†ï¼š

```plaintext
$ git log
commit ecdb9ff1ac54adc22ad73d66bbe9ef943ee3d553 (HEAD -> master)
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:56:50 2023 +0800

    demo, edit hello.txt

commit 3a7c633683b18afe53ef089f9e86fda31c66a881
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:40:14 2023 +0800

    This is the first commit.
```

![](images/ch06_08_commit_line2.png)

## 4. åˆ é™¤æ–‡æ¡£

åˆ é™¤æ–‡æ¡£ hello.txt å¹¶æŸ¥çœ‹çŠ¶æ€

```plaintext
$ rm hello.txt
$ git status
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        deleted:    hello.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

æ–‡å­—ç‰ˆæ²¡æœ‰ç€è‰²ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼š

![](images/ch06_04_git_status_delete.png)

é€šè¿‡æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œåˆ é™¤çš„æ–‡ä»¶å·²ç»ç”¨çº¢è‰²æ ‡å‡ºã€‚

æ·»åŠ æ”¹åŠ¨ï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼š

```plaintext
$ git add hello.txt
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        deleted:    hello.txt
```

æ–‡å­—ç‰ˆæ²¡æœ‰ç€è‰²ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼š

![](images/ch06_05_git_add_delete.png)

æäº¤æ”¹åŠ¨ï¼Œå…¥åº“ï¼š

```plaintext
$ git commit -m "demo, delete hello.txt"
[master 8aee674] demo, delete hello.txt
 1 file changed, 2 deletions(-)
 delete mode 100644 hello.txt
```

ä¸Šé¢ç‰¹åˆ«è¦æ³¨æ„ `git add` æ˜¯æ·»åŠ ã€Œåˆ é™¤æ–‡ä»¶ã€è¿™ä¸ªæ”¹åŠ¨ï¼Œè€Œä¸æ˜¯æ·»åŠ æ–‡ä»¶ã€‚

ç”¨ `git log` æŸ¥çœ‹å†å²è®°å½•ï¼Œèƒ½å‘ç°å·²ç»æœ‰ä¸‰ä¸ªç‰ˆæœ¬äº†ï¼š

```plaintext
$ git log
commit 8aee6742c2da1cd4fc8c907e886b0ee90d2f53a4 (HEAD -> master)
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 07:02:44 2023 +0800

    demo, delete hello.txt

commit ecdb9ff1ac54adc22ad73d66bbe9ef943ee3d553
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:56:50 2023 +0800

    demo, edit hello.txt

commit 3a7c633683b18afe53ef089f9e86fda31c66a881
Author: Cao Yi <iridiumcao@gmail.com>
Date:   Fri Dec 8 06:40:14 2023 +0800

    This is the first commit.
```

![](images/ch06_09_commit_line3.png)

## 5. æŸ¥çœ‹æŒ‡ä»¤å¸®åŠ©

è¿™ä¸€ç« æåˆ°çš„æŒ‡ä»¤éƒ½å¾ˆé‡è¦ï¼Œå¿…é¡»æŒæ¡ã€‚

* `git status`
* `git add`
* `git commit`
* `git log`
* `git diff`
* `git show`

å¦‚æœæƒ³è¦äº†è§£æŒ‡ä»¤çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ `--help` æ¥æŸ¥çœ‹ï¼Œæ¯”å¦‚ï¼š

* `git --help`
* `git status --help`
* ...

## 6. è¿›é˜¶ç¯‡

_è¿›é˜¶ç¯‡çš„å†…å®¹åœ¨å¯¹ git æœ‰ä¸€å®šä½¿ç”¨ç»éªŒåé˜…è¯»æ›´ä½³ï¼Œåˆå­¦è€…å¯ä»¥è·³è¿‡ã€‚_

### 6.1 `git rm`

`git rm`, å°†å·²æ·»åŠ åˆ° Staging Area çš„æ–‡ä»¶ç§»é™¤åˆ° Working Directory ä¸­ã€‚

ä¾‹å¦‚åœ¨æ‰§è¡Œ `git add hello.txt` åå†æ‰§è¡Œ `git rm`ï¼š

```plaintext
$ git rm hello.txt
rm 'hello.txt'
```

å®ƒå¹¶éåˆ é™¤æ–‡ä»¶ hello.txtï¼Œè€Œæ˜¯å°† hello.txt çš„å˜åŒ–ä»ç¼“å†²åŒºæ’¤é”€ï¼Œç•™åœ¨å·¥ä½œåŒºé‡Œã€‚

### 6.2 `git log --pretty=oneline`

å‚æ•° `--pretty=oneline` å¯ä»¥æ›´åŠ ç´§å‡‘åœ°æ˜¾ç¤ºæ—¥å¿—ï¼Œä»…æ˜¾ç¤º hash å’Œ message.

![](images/ch06_10_oneline.png)

ä¸Šé¢è¿™ä¸ªæŒ‡ä»¤æ˜¾ç¤ºæ¯ä¸ª commit å®Œæ•´ hash, ä¸€èˆ¬ç”¨ä¸ä¸Šï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `git log --oneline`, å®ƒåªæ˜¾ç¤º commit hash å‰7ä½ã€‚

æ›´å¤šåœ°æŸ¥çœ‹æ—¥å¿—çš„å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ `git log --help` æŸ¥çœ‹ã€‚

æœ¬å°èŠ‚åœ¨[ç¬¬åå››ç« ](14.md)è¿˜æœ‰æ›´å¤šæè¿°ã€‚

### 6.3 ç»¼åˆæœ‰æ·»åŠ åˆ é™¤ä¿®æ”¹çš„ä¾‹å­

åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œ`git status` æ›´æœ‰å¯èƒ½åƒä¸‹é¢çš„æ ·å­ï¼Œä¸€ä¸ªå¯èƒ½ä¿®æ”¹(CUD)å¤šä¸ªæ–‡ä»¶ã€‚

![](images/ch06_06_git_status_all.png)

ä¸Šé¢ hello2.txt æ—¢å‡ºç°åœ¨ç¼“å­˜åŒº (ç»¿è‰²)ï¼Œä¹Ÿå‡ºç°å·¥ä½œåŒº (çº¢è‰²)ï¼Œæ˜¯å› ä¸ºå°† hello2.txt åŠ å…¥åˆ°ç¼“å­˜åŒºåï¼Œåˆåœ¨å·¥ä½œåŒºåšäº†ä¸€äº›æ–°çš„ä¿®æ”¹ã€‚

### 6.4 åˆ†æ”¯è¯´æ˜

æœ¬æ–‡ä¸­çš„æ‰€æœ‰ commit éƒ½åœ¨åŒä¸€ä¸ªé»˜è®¤åˆ†æ”¯ `master` ä¸Šã€‚

Git çš„é»˜è®¤åˆ†æ”¯æ—§ç‰ˆæ˜¯ `master`ï¼Œæ–°ç‰ˆæ˜¯ `main`ï¼Œè¿™æ˜¯å—ç¾å›½çš„é»‘äººè¿åŠ¨ Black Life Matters çš„å½±å“è€Œåšå‡ºçš„å“åº”ã€‚

---

[â‡¦ä¸Šä¸€ç« ](05.md) - [é¦–é¡µğŸ ](index.md) - [ä¸‹ä¸€ç« â‡¨](07.md)